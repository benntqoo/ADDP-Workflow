---
command: |
  echo "检查测试覆盖率工具..."
  if command -v jest >/dev/null 2>&1; then
    echo "发现 Jest"
  elif command -v pytest >/dev/null 2>&1; then
    echo "发现 pytest"
  elif command -v go >/dev/null 2>&1; then
    echo "发现 Go test"
  fi
---
分析测试覆盖率并提供改进建议：

## 覆盖率分析

1. **当前状态评估**
   - 整体覆盖率百分比
   - 文件级别覆盖率
   - 函数/方法覆盖率
   - 分支覆盖率
   - 行覆盖率

2. **覆盖率热图**
   ```
   🟩 90-100% - 优秀
   🟨 70-89%  - 良好
   🟧 50-69%  - 需改进
   🟥 0-49%   - 严重不足
   ```

3. **未覆盖代码分析**
   - 关键业务逻辑缺失
   - 错误处理路径
   - 边界条件检查
   - 复杂条件分支

## 改进建议

### 优先级排序
1. **高优先级**：核心业务逻辑
2. **中优先级**：公共工具函数
3. **低优先级**：简单 getter/setter

### 测试补充策略
- 识别最容易提升覆盖率的模块
- 为复杂函数添加参数化测试
- 补充异常场景测试
- 增加集成测试覆盖

## 质量指标

### 目标设定
- 总体覆盖率目标：80%+
- 核心模块目标：90%+
- 新代码覆盖率：95%+

### 持续监控
- 设置覆盖率门槛
- PR 合并前检查
- 覆盖率趋势追踪
- 定期覆盖率审查

## 报告生成
- 详细报告 → `docs/development/coverage/`
- 可视化图表 → HTML 报告
- 改进任务 → TodoWrite 列表