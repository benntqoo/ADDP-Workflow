---
arguments: optional
format: "[check|apply|validate|report]"
examples:
  - "/ai-rules - 检查并应用 AI 协作规范"
  - "/ai-rules check - 仅检查当前规范状态"
  - "/ai-rules apply - 应用规范到当前会话"
  - "/ai-rules validate - 验证最近操作的合规性"
  - "/ai-rules report - 生成规范遵守情况报告"
---

Claude Code 协作规范管理器：

## 🔍 规范检查与应用

### 1. 检查项目规范
- **CLAUDE.md 扫描**
  - 版本信息提取
  - LOCAL 标记区域识别
  - 项目特定配置解析
  - 文档管理规范检查

### 2. 规范解析与应用
- **提取关键配置**
  - 工作模式（深度/探索/批量）
  - 代码风格偏好
  - 自动化行为设置
  - 项目特定术语

- **应用到当前会话**
  - 调整响应风格
  - 激活自动化功能
  - 加载项目词汇表
  - 设置工作流程

### 3. 合规性验证
- **实时检查**
  - 代码风格一致性
  - 命名规范遵守度
  - 文档位置正确性（docs/ 目录结构）
  - 工作流程符合度

- **违规提醒**
  - 即时纠正建议
  - CLAUDE.md 参考章节
  - 修复示例代码

### 4. 自定义规则集
```yaml
Claude Code 规则示例:
  代码规范:
    - 遵循项目既定风格
    - 保持命名一致性
    - 注释风格统一
  
  工作流程:
    - 使用 TodoWrite 追踪任务
    - 修改前先 Read 文件
    - 文档放入 docs/ 对应目录
  
  自动化:
    - 修改后运行测试
    - 检查 lint 和 typecheck
    - 更新相关文档
```

### 5. 与 CLAUDE.md 同步
- **版本检查**
  - 检测 CLAUDE.md 版本
  - 提示更新建议
  - 保护 LOCAL 区域

- **规范加载**
  - 读取项目特定配置
  - 应用自定义行为
  - 激活项目命令

## 📊 规范报告生成

### 遵守情况统计
- 规范覆盖率
- 常见违规项
- 改进建议
- 历史趋势

### 输出位置
- 详细报告 → `docs/internal/ai-rules-report.md`
- 快速摘要 → 控制台输出
- 改进建议 → TodoWrite 任务

## 🔄 与其他命令协作

- 配合 `/guardian` 实时监控代码质量
- 触发 `/sync` 同步最新规范
- 调用 `/constitution` 重新应用规范

## 💡 使用场景

1. **开始工作时**
   ```bash
   /ai-rules apply
   # 加载项目规范，准备工作环境
   ```

2. **提交代码前**
   ```bash
   /ai-rules validate
   # 检查是否符合项目规范
   ```

3. **定期审查**
   ```bash
   /ai-rules report
   # 生成规范遵守情况报告
   ```

4. **规范更新后**
   ```bash
   /ai-rules check
   # 查看新规范变化
   ```

## ⚡ 快速修复

当发现违规时，ai-rules 会提供：
1. 具体的违规说明
2. 正确的做法示例
3. 自动修复命令（如适用）
4. 相关文档链接