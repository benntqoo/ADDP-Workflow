---
command: |
  echo "=== 部署前检查清单 ==="
  echo "检查 Git 状态..."
  git status --porcelain
  echo -e "\n检查分支..."
  git branch --show-current
  echo -e "\n最近提交..."
  git log --oneline -5
---
执行部署前的全面检查：

## 🔍 代码检查

### 版本控制
- [ ] 所有更改已提交
- [ ] 代码已推送到远程
- [ ] 在正确的分支上
- [ ] 标签已创建（如需要）

### 代码质量
- [ ] 通过所有 lint 检查
- [ ] 通过类型检查
- [ ] 无 console.log 或调试代码
- [ ] 无硬编码的密钥或密码

## 🧪 测试验证

- [ ] 单元测试全部通过
- [ ] 集成测试全部通过
- [ ] E2E 测试通过（如有）
- [ ] 测试覆盖率达标
- [ ] 无跳过的测试

## 📦 构建检查

- [ ] 生产构建成功
- [ ] 构建产物大小合理
- [ ] 依赖版本锁定
- [ ] 环境变量已配置
- [ ] 静态资源已优化

## 🔒 安全审查

- [ ] 依赖漏洞扫描
- [ ] 敏感信息检查
- [ ] API 密钥安全存储
- [ ] HTTPS 配置正确
- [ ] 权限设置适当

## 📋 文档更新

- [ ] CHANGELOG 已更新
- [ ] README 信息准确
- [ ] API 文档已同步
- [ ] 部署指南已更新
- [ ] 版本号已递增

## 🚀 部署准备

### 环境检查
- [ ] 目标环境可访问
- [ ] 数据库迁移已准备
- [ ] 配置文件已更新
- [ ] 监控告警已配置

### 回滚方案
- [ ] 回滚脚本已准备
- [ ] 数据备份已完成
- [ ] 回滚测试已验证
- [ ] 紧急联系人已通知

## 📊 检查报告

生成部署就绪报告：
- 检查项统计
- 风险等级评估
- 建议和警告
- 部署批准状态

报告输出 → `docs/releases/deploy-checklist-[日期].md`