---
arguments: required
format: "[決策內容或學到的經驗]"
examples:
  - "/learn 選擇 Redis 作為緩存因為需要高性能會話管理"
  - "/learn 使用工廠模式重構了訂單創建邏輯"
  - "/learn 發現 N+1 查詢問題，使用預加載解決"
---

# 學習並記錄決策

我將幫你記錄重要的技術決策和經驗教訓：

## 📝 記錄內容

### 1. 決策分析
- **決策內容**：你做了什麼選擇
- **背景原因**：為什麼這樣決定
- **預期效果**：希望達到什麼目標
- **潛在影響**：可能帶來的變化

### 2. 知識提取
- 可復用的模式
- 需要避免的陷阱
- 最佳實踐總結
- 相關參考資源

### 3. 自動更新文檔

<!-- File Operations: Direct Read/Write -->
<!-- Target: .claude/memory/DECISIONS.md -->

#### 直接記錄決策

我將直接更新決策文件：

```bash
# 確保目錄存在
mkdir -p .claude/memory

# 檢查文件位置（智能搜索）
# 優先級： .claude/memory/ > .claude/ > ./ > docs/
```

**更新流程**：
1. 讀取現有 DECISIONS.md（如存在）
2. 添加新的決策記錄
3. 保持格式一致
4. 寫回文件

**決策格式**：
```markdown
## [日期] - [決策標題]

**決策**：[具體內容]

**原因**：
- [原因分析]

**影響**：
- [預期影響]

**標籤**： #[標籤]
```

#### 智能更新項目上下文（如需要）

如果是重大決策，同時更新 `.claude/memory/PROJECT_CONTEXT.md`

#### 自動創建知識片段
當識別到可復用模式時，創建：
`.claude/memory/knowledge/[主題].md`

包含：
- 問題描述
- 解決方案
- 代碼示例
- 注意事項
- 相關鏈接

### 4. 知識關聯
- 關聯到相關代碼
- 引用相關文檔
- 標記影響範圍
- 設置提醒事項

## 🎯 記錄原則

1. **及時性**：決策後立即記錄
2. **完整性**：包含足夠的上下文
3. **可追溯**：說明前因後果
4. **可操作**：提供具體指導

## 💡 典型場景

- **技術選型**："選擇 X 而不是 Y"
- **架構決策**："採用微服務拆分"
- **問題解決**："這樣解決了性能問題"
- **經驗教訓**："下次要避免這個錯誤"

## 🔄 知識復用

記錄的知識將在未來幫助：
- 避免重複討論
- 快速做出決策
- 保持一致性
- 新人快速上手

## 🤖 自動化特性

1. **智能解析**：自動從你的描述中提取決策要點
2. **文件管理**：自動創建必要的目錄和文件
3. **關聯分析**：自動找出相關的代碼和文檔
4. **標籤系統**：自動分類和打標籤便於檢索
5. **版本追蹤**：每個決策都有時間戳和版本

## 🔗 與其他命令的連動

- **`/start` 創建的文檔**：本命令會持續更新
- **`/sync` 同步時**：會讀取這些決策恢復上下文
- **`/context` 檢查時**：會驗證決策是否被正確理解
- **`/plan` 規劃時**：會參考過往決策避免衝突

讓每個決策都成為團隊的財富！